#include <iostream>
#include <vector>
using namespace std;

struct Node{
    int data;
    Node* left;
    Node* right;
    Node(int x){ data = x; left = right = NULL; }
};

int search(vector<int>& in, int val){
    for(int i = 0; i < in.size(); i++)
        if(in[i] == val) return i;
    return -1;
}

Node* buildTree(vector<int>& in, vector<int>& post, int &idx, int l, int r){
    if(l > r) return NULL;

    Node* root = new Node(post[idx--]);
    int pos = search(in, root->data);

    root->right = buildTree(in, post, idx, pos+1, r);
    root->left  = buildTree(in, post, idx, l, pos-1);

    return root;
}

int main(){
    vector<int> in = {4,2,5,1,3};
    vector<int> post = {4,5,2,3,1};

    int idx = post.size()-1;
    Node* root = buildTree(in, post, idx, 0, in.size()-1);

    cout << "Tree constructed.";
}
